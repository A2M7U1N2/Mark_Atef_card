<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Mark Atef • Cardvia</title>
    <!-- Tailwind + Font Awesome + QR -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        .glass-card {
            background: rgba(24, 24, 27, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .social-icon {
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .social-icon:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.2);
        }
        .btn-shine {
            position: relative;
            overflow: hidden;
        }
        .btn-shine::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }
        .btn-shine:hover::after {
            opacity: 1;
            left: 100%;
        }
        button, a {
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body class="bg-zinc-950 text-white min-h-screen flex items-center justify-center p-4">
    <!-- خلفية متدرجة -->
    <div class="fixed inset-0 bg-gradient-to-br from-zinc-900 via-zinc-950 to-black -z-10"></div>
    
    <div class="max-w-md w-full mx-auto relative">
        <!-- البطاقة الرئيسية -->
        <div class="glass-card rounded-[2rem] overflow-hidden shadow-2xl border border-white/5">
            <!-- Cover + Avatar -->
            <div class="relative h-56 bg-cover bg-center" id="coverBg"
                 style="background-image: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070&auto=format&fit=crop')">
                <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-zinc-900/70 to-zinc-900"></div>
                
                <!-- Avatar - تم التكبير إلى w-36 h-36 (144px) وتعديل الموضع -->
                <div class="absolute left-1/2 -translate-x-1/2 w-36 h-36 rounded-[2rem] overflow-hidden border-[6px] border-zinc-900 shadow-2xl" style="bottom: -4.5rem;">
                    <img id="profileImg" src="https://ik.imagekit.io/fojb8puzo/587561236_18521282191064714_539670380412377_n.jpg" 
                         class="w-full h-full object-cover" alt="Mark Atef" onerror="this.src='https://via.placeholder.com/200?text=Mark'">
                </div>
            </div>

            <!-- تم زيادة الـ padding-top لتعويض حجم الصورة الأكبر -->
            <div class="pt-24 pb-8 px-6">
                <!-- Name & Title -->
                <div class="text-center">
                    <h1 id="fullName" class="text-4xl font-bold tracking-tight bg-gradient-to-r from-white to-zinc-300 bg-clip-text text-transparent">Mark Atef</h1>
                    <p id="title" class="text-zinc-400 mt-1 text-lg font-light">Founder of Cardvia • Engineering Student</p>
                </div>

                <!-- Bio -->
                <p id="bio" class="text-center text-zinc-300 mt-6 text-[15px] leading-relaxed">
                    طالب هندسة اتصالات وإلكترونيات | مؤسس Cardvia - كروت NFC ذكية
                </p>

                <!-- Main Buttons -->
                <div id="mainButtons" class="mt-10 space-y-3"></div>

                <!-- Social -->
                <div class="mt-10">
                    <p class="text-xs uppercase tracking-widest text-zinc-500 text-center mb-4">تابعني</p>
                    <div id="socialButtons" class="grid grid-cols-4 gap-3"></div>
                </div>

                <!-- Footer with QR and Share -->
                <div class="mt-12 flex items-center justify-between text-xs text-zinc-500">
                    <button id="showQrBtn" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 transition border border-white/10 active:scale-95" aria-label="عرض رمز QR">
                        <i class="fas fa-qrcode text-sm"></i>
                        <span class="text-zinc-300">QR</span>
                    </button>
                    <div class="flex items-center gap-2">
                        <i class="fas fa-bolt text-emerald-400"></i>
                        <span>POWERED BY <span class="font-semibold text-white">CARDVIA</span></span>
                    </div>
                    <button id="shareBtn" class="flex items-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 transition border border-white/10 active:scale-95" aria-label="مشاركة الصفحة">
                        <i class="fas fa-share-alt text-sm"></i>
                        <span class="text-zinc-300">مشاركة</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Modal -->
    <div id="overlay" class="hidden fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-4" role="dialog" aria-modal="true" aria-label="رمز QR">
        <div class="glass rounded-[2rem] p-8 w-full max-w-xs mx-4 text-center border border-white/20 shadow-2xl">
            <p class="text-lg font-medium mb-6 text-white">امسح الـ QR عشان تربط الصفحة</p>
            <div id="qrContainer" class="mx-auto bg-white p-4 rounded-2xl inline-block min-h-[240px] min-w-[240px] flex items-center justify-center">
                <div id="qrLoader" class="text-zinc-400"><i class="fas fa-spinner fa-spin text-3xl"></i></div>
            </div>
            <button id="closeQr" class="mt-8 w-full py-4 bg-white text-zinc-900 font-bold rounded-2xl text-sm tracking-wider hover:bg-zinc-200 transition btn-shine relative overflow-hidden">
                إغلاق
            </button>
        </div>
    </div>

    <script>
        (function() {
            const CONFIG = {
                fullName: "Mark Atef",
                title: "Founder of Cardvia • CCE Engineering Student",
                bio: "طالب هندسة حاسبات و اتصالات | مؤسس Cardvia  ",
                profileImage: "https://ik.imagekit.io/fojb8puzo/587561236_18521282191064714_539670380412377_n.jpg",
                coverImage: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070&auto=format&fit=crop",
                mainButtons: [
                    { icon: "fas fa-phone", label: "اتصل الآن", url: "tel:+201140567825", color: "bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 hover:bg-emerald-500/20" },
                    { icon: "fab fa-whatsapp", label: "واتساب", url: "https://wa.me/201140567825", color: "bg-green-500/10 text-green-400 border border-green-500/20 hover:bg-green-500/20" },
                    { icon: "fas fa-envelope", label: "الإيميل", url: "mailto:markatef219@gmail.com", color: "bg-blue-500/10 text-blue-400 border border-blue-500/20 hover:bg-blue-500/20" },
                    { icon: "fas fa-download", label: "حفظ في الجهات", url: "#", type: "save-contact", color: "bg-purple-500/10 text-purple-400 border border-purple-500/20 hover:bg-purple-500/20" }
                ],
                socials: [
                    { icon: "fab fa-facebook-f", url: "https://web.facebook.com/mark.atef.587/", color: "text-blue-400" },
                    { icon: "fab fa-instagram", url: "https://www.instagram.com/_mark_atef_/", color: "text-pink-400" },
                    { icon: "fab fa-linkedin-in", url: "https://www.linkedin.com/in/mark-atef-796003264/", color: "text-sky-400" },
                    { icon: "fab fa-github", url: "https://github.com/A2M7U1N2", color: "text-white" }
                ],
                vCard: {
                    firstName: "Mark",
                    lastName: "Atef",
                    organization: "Cardvia",
                    title: "Founder & Engineer",
                    phone: "+201140567825",
                    email: "markatef219@gmail.com"
                },
                qr: {
                    width: 240,
                    margin: 2,
                    color: { dark: "#000000", light: "#ffffff" }
                }
            };

            document.getElementById('fullName').textContent = CONFIG.fullName;
            document.getElementById('title').textContent = CONFIG.title;
            document.getElementById('bio').textContent = CONFIG.bio;
            document.getElementById('profileImg').src = CONFIG.profileImage;
            document.getElementById('coverBg').style.backgroundImage = `url('${CONFIG.coverImage}')`;

            const coverBg = document.getElementById('coverBg');
            const img = new Image();
            img.src = CONFIG.coverImage;
            img.onerror = () => {
                coverBg.style.backgroundImage = "url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070&auto=format&fit=crop')";
            };

            function renderMainButtons() {
                const container = document.getElementById('mainButtons');
                container.innerHTML = '';
                CONFIG.mainButtons.forEach(btn => {
                    const a = document.createElement('a');
                    a.href = btn.url !== "#" ? btn.url : "#";
                    a.className = `flex items-center gap-4 ${btn.color} backdrop-blur-sm px-6 py-4 rounded-2xl text-white font-medium text-lg transition-all hover:scale-[1.02] active:scale-[0.98]`;
                    a.setAttribute('role', 'button');
                    if (btn.url.startsWith('http')) a.setAttribute('target', '_blank');
                    a.innerHTML = `
                        <i class="${btn.icon} text-2xl w-8"></i>
                        <span class="flex-1">${btn.label}</span>
                        <i class="fas fa-chevron-left opacity-50 text-sm"></i>
                    `;

                    if (btn.type === "save-contact") {
                        a.addEventListener('click', (e) => {
                            e.preventDefault();
                            saveContact();
                        });
                    }
                    container.appendChild(a);
                });
            }

            function renderSocials() {
                const container = document.getElementById('socialButtons');
                container.innerHTML = '';
                CONFIG.socials.forEach(s => {
                    const a = document.createElement('a');
                    a.href = s.url;
                    a.target = "_blank";
                    a.rel = "noopener noreferrer";
                    a.className = `flex items-center justify-center p-4 rounded-2xl social-icon ${s.color} hover:scale-110 transition`;
                    a.setAttribute('aria-label', `تابع على ${s.icon.replace('fab fa-', '')}`);
                    a.innerHTML = `<i class="${s.icon} text-2xl"></i>`;
                    container.appendChild(a);
                });
            }

            function saveContact() {
                const vc = CONFIG.vCard;
                const vcard = `BEGIN:VCARD
VERSION:3.0
N:${vc.lastName};${vc.firstName};;;
FN:${vc.firstName} ${vc.lastName}
ORG:${vc.organization}
TITLE:${vc.title}
TEL;TYPE=CELL,VOICE:${vc.phone}
EMAIL;TYPE=WORK:${vc.email}
END:VCARD`;

                const blob = new Blob([vcard], { type: 'text/vcard' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${vc.firstName}_${vc.lastName}.vcf`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                alert('تم تحميل ملف جهة الاتصال. افتح الملف لإضافته إلى جهات الاتصال.');
            }

            let qrShown = false;
            const overlay = document.getElementById('overlay');
            const qrContainer = document.getElementById('qrContainer');
            const qrLoader = document.getElementById('qrLoader');

            function showQR() {
                if (qrShown) return;
                overlay.classList.remove('hidden');
                qrLoader.style.display = 'block';
                qrContainer.innerHTML = '';
                qrContainer.appendChild(qrLoader);

                QRCode.toCanvas(document.createElement('canvas'), window.location.href, CONFIG.qr, (err, canvas) => {
                    qrLoader.style.display = 'none';
                    if (err) {
                        qrContainer.innerHTML = '<p class="text-red-500">حدث خطأ في إنشاء QR</p>';
                        console.error(err);
                        return;
                    }
                    qrContainer.innerHTML = '';
                    canvas.classList.add('rounded-xl', 'shadow-lg');
                    qrContainer.appendChild(canvas);
                });
                qrShown = true;
            }

            function hideQR() {
                overlay.classList.add('hidden');
                qrShown = false;
            }

            document.getElementById('showQrBtn').addEventListener('click', showQR);
            document.getElementById('closeQr').addEventListener('click', hideQR);
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) hideQR();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !overlay.classList.contains('hidden')) hideQR();
            });

            const shareBtn = document.getElementById('shareBtn');
            shareBtn.addEventListener('click', () => {
                if (navigator.share) {
                    navigator.share({
                        title: CONFIG.fullName,
                        text: CONFIG.bio,
                        url: window.location.href
                    }).catch((error) => {
                        if (error.name !== 'AbortError') {
                            console.error('مشاركة فشلت:', error);
                            fallbackCopy();
                        }
                    });
                } else {
                    fallbackCopy();
                }
            });

            function fallbackCopy() {
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('✅ تم نسخ الرابط! يمكنك مشاركته الآن.');
                }).catch(() => {
                    prompt('انسخ الرابط يدويًا:', window.location.href);
                });
            }

            renderMainButtons();
            renderSocials();

            console.log('%c✅ Cardvia - جاهز للموبايل', 'color:#10b981; font-size:16px; font-weight:bold');
        })();
    </script>
</body>
</html>
